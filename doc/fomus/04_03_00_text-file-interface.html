<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-08-23 Fr 08:51 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fomus</title>
<meta name="author" content="David Psenicka" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="../css/fomus.css" />
<link href="./pagefind/pagefind-ui.css" rel="stylesheet">
<script src="./pagefind/pagefind-ui.js"></script>
</head>
<body>
<div id="preamble" class="status">
<a class="top-menu" href="../overview/index.html">Overview</a>
<a class="top-menu" href="../clamps/index.html">Clamps Packages</a>
<a class="top-menu" href="../cm-dict/index.html">CM Dictionary</a>
<a class="top-menu" href="../clamps-dict/index.html">Clamps Dictionary</a>
<a class="top-menu top-menu-active" href="../fomus/index.html">Fomus</a>
</div>
<div id="org-div-nav-menu">Next: <a accesskey="n" href="04_04_00_common-music-interface.html"> Common Music Interface </a>,&nbsp;Previous: <a accesskey="p" href="04_02_00_interface-2.html"> Interface 2 </a>,&nbsp;Up: <a accesskey="u" href="04_00_00_usage.html"> Usage </a>,&nbsp;Home: <a accesskey="h" href="01_00_00_disclaimer.html"> Disclaimer </a></div><div id="content" class="content">
<nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul class="ul-toc-level-1">
<li class="toc-level-1"><a href="01_00_00_disclaimer.html"class="toc-entry">Disclaimer</a></li>
<li class="toc-level-1"><a href="02_00_00_introduction.html"class="toc-entry">Introduction</a></li>
<li class="toc-level-1"><a href="03_00_00_installation.html"class="toc-entry">Installation</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="03_00_00_installation.html"class="toc-entry">Downloading</a></li>
<li class="toc-hidden toc-level-2"><a href="03_02_00_compiling-loading.html"class="toc-entry">Compiling/Loading</a></li>
<li class="toc-hidden toc-level-2"><a href="03_03_00_installing-as-an-executable.html"class="toc-entry">Installing as an Executable</a></li>
<li class="toc-hidden toc-level-2"><a href="03_04_00_customizing-the-installation.html"class="toc-entry">Customizing the Installation</a></li>
<li class="toc-hidden toc-level-2"><a href="03_05_00_simple-emacs-interface.html"class="toc-entry">Simple Emacs Interface</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="04_00_00_usage.html"class="toc-entry">Usage</a>
<ul class="ul-toc-level-2">
<li class="toc-level-2"><a href="04_01_00_interface-1.html"class="toc-entry">Interface 1</a></li>
<li class="toc-level-2"><a href="04_02_00_interface-2.html"class="toc-entry">Interface 2</a></li>
<li class="toc-level-2"><a href="04_03_00_text-file-interface.html"class="toc-entry toc-active">Text File Interface</a></li>
<li class="toc-level-2"><a href="04_04_00_common-music-interface.html"class="toc-entry">Common Music Interface</a></li>
<li class="toc-level-2"><a href="04_05_00_command-line-interface.html"class="toc-entry">Command Line Interface</a></li>
<li class="toc-level-2"><a href="04_06_00_chunks.html"class="toc-entry">Chunks</a></li>
<li class="toc-level-2"><a href="04_07_00_other-interface-functions.html"class="toc-entry">Other Interface Functions</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="04_07_00_other-interface-functions.html"class="toc-entry">list-fomus-settings</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_02_list-fomus-modules.html"class="toc-entry">list-fomus-modules</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_03_list-fomus-instruments.html"class="toc-entry">list-fomus-instruments</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_04_get-instr-syms.html"class="toc-entry">get-instr-syms</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_05_list-fomus-percussion.html"class="toc-entry">list-fomus-percussion</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_06_get-perc-syms.html"class="toc-entry">get-perc-syms</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_07_list-fomus-instrgroups.html"class="toc-entry">list-fomus-instrgroups</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_08_list-fomus-clefs.html"class="toc-entry">list-fomus-clefs</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_09_list-fomus-meas-divs.html"class="toc-entry">list-fomus-meas-divs</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_10_list-fomus-tuplet-divs.html"class="toc-entry">list-fomus-tuplet-divs</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_11_load-init-file.html"class="toc-entry">load-init-file</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_12_get-midi-instr.html"class="toc-entry">get-midi-instr</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_13_marks.html"class="toc-entry">marks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-level-1"><a href="05_00_00_objects.html"class="toc-entry">Objects</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="05_01_00_class-part.html"class="toc-entry">Class PART</a></li>
<li class="toc-hidden toc-level-2"><a href="05_02_00_class-timesig.html"class="toc-entry">Class TIMESIG</a></li>
<li class="toc-hidden toc-level-2"><a href="05_03_00_class-timesig-repl.html"class="toc-entry">Class TIMESIG-REPL</a></li>
<li class="toc-hidden toc-level-2"><a href="05_04_00_class-keysig.html"class="toc-entry">Class KEYSIG</a></li>
<li class="toc-hidden toc-level-2"><a href="05_05_00_class-note.html"class="toc-entry">Class NOTE</a></li>
<li class="toc-hidden toc-level-2"><a href="05_06_00_class-rest.html"class="toc-entry">Class REST</a></li>
<li class="toc-hidden toc-level-2"><a href="05_07_00_class-mark.html"class="toc-entry">Class MARK</a></li>
<li class="toc-hidden toc-level-2"><a href="05_08_00_structure-instr.html"class="toc-entry">Structure INSTR</a></li>
<li class="toc-hidden toc-level-2"><a href="05_09_00_structure-perc.html"class="toc-entry">Structure PERC</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="06_00_00_settings.html"class="toc-entry">Settings</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="06_01_00_most-useful-fomus-settings.html"class="toc-entry">Most Useful FOMUS Settings</a></li>
<li class="toc-hidden toc-level-2"><a href="06_02_00_complete-fomus-settings.html"class="toc-entry">Complete FOMUS Settings</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="06_02_00_complete-fomus-settings.html"class="toc-entry">Program Settings</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_02_backend-options.html"class="toc-entry">Backend Options</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_03_global.html"class="toc-entry">Global</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_04_objects.html"class="toc-entry">Objects</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_05_parts.html"class="toc-entry">Parts</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_06_time-signatures.html"class="toc-entry">Time Signatures</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_07_plugins.html"class="toc-entry">Plugins</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_08_plugins-on-off.html"class="toc-entry">Plugins On/Off</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_09_quantizing.html"class="toc-entry">Quantizing</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_10_staves.html"class="toc-entry">Staves</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_11_ottavas.html"class="toc-entry">Ottavas</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_12_accidentals.html"class="toc-entry">Accidentals</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_13_cautionary-accidentals.html"class="toc-entry">Cautionary Accidentals</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_14_grace-notes.html"class="toc-entry">Grace Notes</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_15_measure-tuplet-divisions.html"class="toc-entry">Measure/Tuplet Divisions</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_16_note-splitting-tying.html"class="toc-entry">Note Splitting/Tying</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_17_beams.html"class="toc-entry">Beams</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="06_03_00_alphabetical-listing-of-settings.html"class="toc-entry">Alphabetical Listing of Settings</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="07_00_00_marks.html"class="toc-entry">Marks</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="07_01_00_fomus-marks.html"class="toc-entry">FOMUS Marks</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="07_01_01_articulations.html"class="toc-entry">Articulations</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_02_dynamics.html"class="toc-entry">Dynamics</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_03_tempo-duration.html"class="toc-entry">Tempo/Duration</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_04_ornamentations.html"class="toc-entry">Ornamentations</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_05_effects.html"class="toc-entry">Effects</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_06_text.html"class="toc-entry">Text</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_07_notation.html"class="toc-entry">Notation</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_08_other.html"class="toc-entry">Other</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="07_02_00_timesig-properties.html"class="toc-entry">TIMESIG Properties</a></li>
<li class="toc-hidden toc-level-2"><a href="07_03_00_part-properties.html"class="toc-entry">PART Properties</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="08_00_00_outputs.html"class="toc-entry">Outputs</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="08_01_00_data.html"class="toc-entry">Data</a></li>
<li class="toc-hidden toc-level-2"><a href="08_02_00_lilypond.html"class="toc-entry">LilyPond</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_02_01_lilypond-options.html"class="toc-entry">LilyPond Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_02_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_03_00_musicxml.html"class="toc-entry">MusicXML</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_03_01_musicxml-options.html"class="toc-entry">MusicXML Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_03_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_04_00_musicxml-for-sibelius.html"class="toc-entry">MusicXML for Sibelius</a></li>
<li class="toc-hidden toc-level-2"><a href="08_05_00_musicxml-for-finale.html"class="toc-entry">MusicXML for Finale</a></li>
<li class="toc-hidden toc-level-2"><a href="08_06_00_common-music-notation.html"class="toc-entry">Common Music Notation</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_06_01_cmn-options.html"class="toc-entry">CMN Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_06_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_07_00_midi.html"class="toc-entry">MIDI</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_07_01_midi-options.html"class="toc-entry">MIDI Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_07_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_08_00_chunk.html"class="toc-entry">CHUNK</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="09_00_00_initialization-file.html"class="toc-entry">Initialization File</a></li>
<li class="toc-level-1"><a href="10_00_00_examples.html"class="toc-entry">Examples</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="10_01_00_lisp-examples.html"class="toc-entry">Lisp Examples</a></li>
<li class="toc-hidden toc-level-2"><a href="10_02_00_common-music-examples.html"class="toc-entry">Common Music Examples</a></li>
<li class="toc-hidden toc-level-2"><a href="10_03_00_text-input-file-examples.html"class="toc-entry">Text Input File Examples</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<header>
<h1 class="title">Fomus</h1>
</header><div id="page-main-body"><nav id="nav-left"><a href="04_02_00_interface-2.html" class="nav-left"><i class="angle-left"></i></a></nav>
<div id="page-text-body"><div id="outline-container-interface.text" class="outline-3">
<h3 id="interface.text">Text File Interface</h3>
<div class="outline-text-3" id="text-interface.text">
<p>
You may also create a text file where each line of the file executes one
of the commands listed in <a href="04_02_00_interface-2.html#org3b2cf53">Interface 2</a>. A simple example file is
given below:
</p>

<pre class="example" id="orgb3c8b47">
init :output (:lilypond :view t)
(init
 :filename "outfile"
 :quality 2)

;; remark
part 1 :name "Piano" :instr :piano

note 1 :off 0 :dur 1 :note 60
note 1 :off 1 :dur 1 :note 62 \
     :marks (:accent) ; remark
(note 1 
      :off 2 
      :dur 1
      :note 64
      :marks (:marcato (:textnote "Text")))

off +2
note 1 :off 2 :dur 1/2 :note c4 ; actual offset is 4
off -1
note 1 :off 10 :dur 1/2 :note c4 ; actual offset is 9
off

note 1 :off 20 :dur 2 :notes (c4 e4 g4 c5)
    
</pre>

<p>
Each element is read using the Lisp <code>READ</code> command (nothing is
evaluated), with the exception of expressions that begin with <code>MAKE-</code>.
These are evaluated to avoid having to specify FOMUS classes and/or
structures with <code>#S</code> or <code>#Z</code> syntax (the Z reader macro is defined by
FOMUS). <code>INIT</code> lines specify values for FOMUS settings and can contain
multiple keyword/arguments on a line. As many <code>INIT</code> lines as needed may
appear. The <code>\</code> character may be used at the end of a line to
concatenate it with the following line. Also, as shown in the example
above, any "entry" may be surrounded by a set of parenthesis to indicate
that all elements inside them are read/parsed together (like an ordinary
Lisp expression)&#x2013;this can also be used to spread entries across several
lines.
</p>

<p>
A few extra things are possible with input files to facilitate editing.
Any section of the file may contain an <code>OFF</code> tag optionally followed by
a number. This tag shifts the offsets of everything that follows by the
specified amount. An <code>OFF</code> tag with no number resets the offset shift
to 0. Also, a <code>:NOTES</code> keyword is available for specifying chords. A
chord is then specified as a list of notes as shown above. When FOMUS
reads this it creates a separate note object for each note in the list.
</p>

<p>
To process this file, use the <code>FOMUS</code> command as follows:
</p>

<p>
<code>(FOMUS filename &amp;key value ...)</code>
</p>

<pre class="example" id="orgb5cc3ce">
(fomus "/directory/file.fms")
    
</pre>

<pre class="example" id="orgc85ae25">
(fomus "/directory/file.fms" :output :cmn)
    
</pre>

<p>
Keyword/argument pairs passed to this function override the settings
stored in the input file.
</p>

<p>
The <code>FOMUS-FILE</code> function may be used to parse an input file and return
the objects specified in that file without processing them:
</p>

<p>
<code>(FOMUS-FILE filename &amp;key value ...)</code>
</p>

<p>
Four return values are returned: a list of <code>PART</code> objects, a sorted list
of <code>NOTE</code>, <code>REST</code> and <code>MARK</code> objects, a list of <code>TIMESIG</code> objects (and
<code>KEYSIG</code> objects when implemented), and a list of keyword/argument pairs
representing the keywords and values found in the <code>INIT</code> lines. The
following example show how you can edit and resave data using these
files:
</p>

<pre class="example" id="org52a7496">
(multiple-value-bind (parts events globals args)
    (fomus-file "/directory/myfomusfile.fms")
  ;; user processing...
  (apply #'fomus "/directory/myfomusfile.fms"
     :global globals :parts parts :events events
     args))
    
</pre>
</div>
</div>
</div><nav id="nav-right"><a href="04_04_00_common-music-interface.html" class="nav-right"><i class="angle-right"></i></a></nav></div></div>
</body>
</html>
