<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-08-23 Fr 08:51 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fomus</title>
<meta name="author" content="David Psenicka" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="../css/fomus.css" />
<link href="./pagefind/pagefind-ui.css" rel="stylesheet">
<script src="./pagefind/pagefind-ui.js"></script>
</head>
<body>
<div id="preamble" class="status">
<a class="top-menu" href="../overview/index.html">Overview</a>
<a class="top-menu" href="../clamps/index.html">Clamps Packages</a>
<a class="top-menu" href="../cm-dict/index.html">CM Dictionary</a>
<a class="top-menu" href="../clamps-dict/index.html">Clamps Dictionary</a>
<a class="top-menu top-menu-active" href="../fomus/index.html">Fomus</a>
</div>
<div id="org-div-nav-menu">Next: <a accesskey="n" href="05_09_00_structure-perc.html"> Structure PERC </a>,&nbsp;Previous: <a accesskey="p" href="05_07_00_class-mark.html"> Class MARK </a>,&nbsp;Up: <a accesskey="u" href="05_00_00_objects.html"> Objects </a>,&nbsp;Home: <a accesskey="h" href="01_00_00_disclaimer.html"> Disclaimer </a></div><div id="content" class="content">
<nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul class="ul-toc-level-1">
<li class="toc-level-1"><a href="01_00_00_disclaimer.html"class="toc-entry">Disclaimer</a></li>
<li class="toc-level-1"><a href="02_00_00_introduction.html"class="toc-entry">Introduction</a></li>
<li class="toc-level-1"><a href="03_00_00_installation.html"class="toc-entry">Installation</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="03_00_00_installation.html"class="toc-entry">Downloading</a></li>
<li class="toc-hidden toc-level-2"><a href="03_02_00_compiling-loading.html"class="toc-entry">Compiling/Loading</a></li>
<li class="toc-hidden toc-level-2"><a href="03_03_00_installing-as-an-executable.html"class="toc-entry">Installing as an Executable</a></li>
<li class="toc-hidden toc-level-2"><a href="03_04_00_customizing-the-installation.html"class="toc-entry">Customizing the Installation</a></li>
<li class="toc-hidden toc-level-2"><a href="03_05_00_simple-emacs-interface.html"class="toc-entry">Simple Emacs Interface</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="04_00_00_usage.html"class="toc-entry">Usage</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="04_01_00_interface-1.html"class="toc-entry">Interface 1</a></li>
<li class="toc-hidden toc-level-2"><a href="04_02_00_interface-2.html"class="toc-entry">Interface 2</a></li>
<li class="toc-hidden toc-level-2"><a href="04_03_00_text-file-interface.html"class="toc-entry">Text File Interface</a></li>
<li class="toc-hidden toc-level-2"><a href="04_04_00_common-music-interface.html"class="toc-entry">Common Music Interface</a></li>
<li class="toc-hidden toc-level-2"><a href="04_05_00_command-line-interface.html"class="toc-entry">Command Line Interface</a></li>
<li class="toc-hidden toc-level-2"><a href="04_06_00_chunks.html"class="toc-entry">Chunks</a></li>
<li class="toc-hidden toc-level-2"><a href="04_07_00_other-interface-functions.html"class="toc-entry">Other Interface Functions</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="04_07_00_other-interface-functions.html"class="toc-entry">list-fomus-settings</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_02_list-fomus-modules.html"class="toc-entry">list-fomus-modules</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_03_list-fomus-instruments.html"class="toc-entry">list-fomus-instruments</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_04_get-instr-syms.html"class="toc-entry">get-instr-syms</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_05_list-fomus-percussion.html"class="toc-entry">list-fomus-percussion</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_06_get-perc-syms.html"class="toc-entry">get-perc-syms</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_07_list-fomus-instrgroups.html"class="toc-entry">list-fomus-instrgroups</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_08_list-fomus-clefs.html"class="toc-entry">list-fomus-clefs</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_09_list-fomus-meas-divs.html"class="toc-entry">list-fomus-meas-divs</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_10_list-fomus-tuplet-divs.html"class="toc-entry">list-fomus-tuplet-divs</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_11_load-init-file.html"class="toc-entry">load-init-file</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_12_get-midi-instr.html"class="toc-entry">get-midi-instr</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_13_marks.html"class="toc-entry">marks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-level-1"><a href="05_00_00_objects.html"class="toc-entry">Objects</a>
<ul class="ul-toc-level-2">
<li class="toc-level-2"><a href="05_01_00_class-part.html"class="toc-entry">Class PART</a></li>
<li class="toc-level-2"><a href="05_02_00_class-timesig.html"class="toc-entry">Class TIMESIG</a></li>
<li class="toc-level-2"><a href="05_03_00_class-timesig-repl.html"class="toc-entry">Class TIMESIG-REPL</a></li>
<li class="toc-level-2"><a href="05_04_00_class-keysig.html"class="toc-entry">Class KEYSIG</a></li>
<li class="toc-level-2"><a href="05_05_00_class-note.html"class="toc-entry">Class NOTE</a></li>
<li class="toc-level-2"><a href="05_06_00_class-rest.html"class="toc-entry">Class REST</a></li>
<li class="toc-level-2"><a href="05_07_00_class-mark.html"class="toc-entry">Class MARK</a></li>
<li class="toc-level-2"><a href="05_08_00_structure-instr.html"class="toc-entry toc-active">Structure INSTR</a></li>
<li class="toc-level-2"><a href="05_09_00_structure-perc.html"class="toc-entry">Structure PERC</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="06_00_00_settings.html"class="toc-entry">Settings</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="06_01_00_most-useful-fomus-settings.html"class="toc-entry">Most Useful FOMUS Settings</a></li>
<li class="toc-hidden toc-level-2"><a href="06_02_00_complete-fomus-settings.html"class="toc-entry">Complete FOMUS Settings</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="06_02_00_complete-fomus-settings.html"class="toc-entry">Program Settings</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_02_backend-options.html"class="toc-entry">Backend Options</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_03_global.html"class="toc-entry">Global</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_04_objects.html"class="toc-entry">Objects</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_05_parts.html"class="toc-entry">Parts</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_06_time-signatures.html"class="toc-entry">Time Signatures</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_07_plugins.html"class="toc-entry">Plugins</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_08_plugins-on-off.html"class="toc-entry">Plugins On/Off</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_09_quantizing.html"class="toc-entry">Quantizing</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_10_staves.html"class="toc-entry">Staves</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_11_ottavas.html"class="toc-entry">Ottavas</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_12_accidentals.html"class="toc-entry">Accidentals</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_13_cautionary-accidentals.html"class="toc-entry">Cautionary Accidentals</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_14_grace-notes.html"class="toc-entry">Grace Notes</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_15_measure-tuplet-divisions.html"class="toc-entry">Measure/Tuplet Divisions</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_16_note-splitting-tying.html"class="toc-entry">Note Splitting/Tying</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_17_beams.html"class="toc-entry">Beams</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="06_03_00_alphabetical-listing-of-settings.html"class="toc-entry">Alphabetical Listing of Settings</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="07_00_00_marks.html"class="toc-entry">Marks</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="07_01_00_fomus-marks.html"class="toc-entry">FOMUS Marks</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="07_01_01_articulations.html"class="toc-entry">Articulations</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_02_dynamics.html"class="toc-entry">Dynamics</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_03_tempo-duration.html"class="toc-entry">Tempo/Duration</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_04_ornamentations.html"class="toc-entry">Ornamentations</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_05_effects.html"class="toc-entry">Effects</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_06_text.html"class="toc-entry">Text</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_07_notation.html"class="toc-entry">Notation</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_08_other.html"class="toc-entry">Other</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="07_02_00_timesig-properties.html"class="toc-entry">TIMESIG Properties</a></li>
<li class="toc-hidden toc-level-2"><a href="07_03_00_part-properties.html"class="toc-entry">PART Properties</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="08_00_00_outputs.html"class="toc-entry">Outputs</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="08_01_00_data.html"class="toc-entry">Data</a></li>
<li class="toc-hidden toc-level-2"><a href="08_02_00_lilypond.html"class="toc-entry">LilyPond</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_02_01_lilypond-options.html"class="toc-entry">LilyPond Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_02_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_03_00_musicxml.html"class="toc-entry">MusicXML</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_03_01_musicxml-options.html"class="toc-entry">MusicXML Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_03_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_04_00_musicxml-for-sibelius.html"class="toc-entry">MusicXML for Sibelius</a></li>
<li class="toc-hidden toc-level-2"><a href="08_05_00_musicxml-for-finale.html"class="toc-entry">MusicXML for Finale</a></li>
<li class="toc-hidden toc-level-2"><a href="08_06_00_common-music-notation.html"class="toc-entry">Common Music Notation</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_06_01_cmn-options.html"class="toc-entry">CMN Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_06_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_07_00_midi.html"class="toc-entry">MIDI</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_07_01_midi-options.html"class="toc-entry">MIDI Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_07_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_08_00_chunk.html"class="toc-entry">CHUNK</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="09_00_00_initialization-file.html"class="toc-entry">Initialization File</a></li>
<li class="toc-level-1"><a href="10_00_00_examples.html"class="toc-entry">Examples</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="10_01_00_lisp-examples.html"class="toc-entry">Lisp Examples</a></li>
<li class="toc-hidden toc-level-2"><a href="10_02_00_common-music-examples.html"class="toc-entry">Common Music Examples</a></li>
<li class="toc-hidden toc-level-2"><a href="10_03_00_text-input-file-examples.html"class="toc-entry">Text Input File Examples</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<header>
<h1 class="title">Fomus</h1>
</header><div id="page-main-body"><nav id="nav-left"><a href="05_07_00_class-mark.html" class="nav-left"><i class="angle-left"></i></a></nav>
<div id="page-text-body"><div id="outline-container-section.objects9" class="outline-3">
<h3 id="section.objects9">Structure INSTR</h3>
<div class="outline-text-3" id="text-section.objects9">
<p>
An <code>INSTR</code> structure contain instrument-specific data that's used to
inform FOMUS on various aspects of notation. Instruments are specified
in the slot of <code>PART</code> objects and can be easily
modified. Users can also build their own "database" of instruments by
creating a FOMUS initialization file (see <a href="09_00_00_initialization-file.html#org146d6ac">Initialization File</a>).
</p>

<p>
Constructor:
<code>(MAKE-INSTR &amp;key :SYM sym :CLEFS clefs :STAVES staves :MINP minp :MAXP maxp :SIMULTLIM simultlim :TPOSE tpose :CLEFLEGLS cleflegls :8UPLEGLS 8uplegls :8DNLEGLS 8dnlegls :PERCS percs :MIDIPRGCH-IM midiprgch-im :MIDIPRGCH-EX midiprgch-ex)</code>
</p>

<p>
Copy Function:
<code>(COPY-INSTR instr &amp;key :SYM sym :CLEFS clefs :STAVES staves :MINP minp :MAXP maxp :SIMULTLIM simultlim :TPOSE tpose :CLEFLEGLS cleflegls :8UPLEGLS 8uplegls :8DNLEGLS 8dnlegls :PERCS percs :MIDIPRGCH-IM midiprgch-im :MIDIPRGCH-EX midiprgch-ex)</code>
</p>

<p>
Predicate Function: <code>(INSTRP obj)</code>
</p>

<p>
Accessors:
</p>

<dl class="org-dl">
<dt><code>INSTR-SYM</code></dt><dd>This is a unique symbol identifying the instrument. It
is used as a lookup value so that it may easily be specified in <code>PART</code>
objects.</dd>

<dt><code>INSTR-CLEFS</code></dt><dd>This is either a symbol or list of symbols,
specifying valid clefs for the instrument in order of preference. The
following clefs are supported: <code>:bass</code>, <code>:c-baritone</code>, <code>:f-baritone</code>,
<code>:tenor</code>, <code>:alto</code>, <code>:mezzosoprano</code>, <code>:soprano</code>, <code>:treble</code> and
<code>:percussion</code>. The user may also add an <code>-8UP</code> or <code>-8DN</code> suffix to the
symbol to specify an octave transposition.</dd>

<dt><code>INSTR-STAVES</code></dt><dd>This is an integer specifying the number of staves
to use. The default is 1.</dd>

<dt><code>INSTR-MINP</code></dt><dd>This is an integer specifying the lowest pitch in the
instrument's range. It may also be set to <code>NIL</code>, in which case the
lower range is considered to be unlimited. This is only useful if the
<code>CHECK-RANGES</code> setting is set to <code>T</code>.</dd>

<dt><code>INSTR-MAXP</code></dt><dd>This is an integer specifying the highest pitch in the
instrument's range. It may also be set to <code>NIL</code>, in which case the
upper range is considered to be unlimited. This is only useful if the
<code>CHECK-RANGES</code> setting is set to <code>T</code>.</dd>

<dt><code>INSTR-SIMULTLIM</code></dt><dd>This is an integer of <code>1</code> or greater specifying
the maximum number of simultaneous pitches allowed in a single voice.
It may also be set to <code>NIL</code>, indicating that there is no limit.</dd>

<dt><code>INSTR-TPOSE</code></dt><dd>This is set to the value <code>NIL</code> or an integer
indicating the number of semitones to transpose the instrument before
notating it. This number only has an effect if the <code>TRANSPOSE</code> setting
is set to <code>T</code>.</dd>

<dt><code>INSTR-CLEFLEGLS</code></dt><dd><p>
The value of this slot influences how FOMUS
decides when to change clefs. A clef change isn't considered necessary
until the number of ledger lines required exceeds a threshold value.
Other factors determine if there is actually a clef change or not. If
the value is an integer, it designates the threshold number of ledger
lines in all cases. If it's a list, the first element of the list must
be an integer specifying a default threshold. This is followed by one
or more exceptions, each in the form of a list. This exception list
contains a clef symbol (see the slot above)
followed by one of the two symbols <code>:UP</code> or <code>:DN</code> and ended by an
integer specifying the number of ledger lines. An example illustrates
this data structure.
</p>

<pre class="example" id="org37fd662">
'(2 (:bass :up 3) (:tenor :down 3))
                
</pre></dd>

<dt><code>INSTR-8UPLEGLS</code></dt><dd>This value influences how FOMUS chooses where to
place ottava brackets above the staff. An ottava bracket isn't
considered necessary until the number of ledger lines required exceeds
a threshold value. An integer in this slot indicates the threshold
value, while a list of two elements specifies the threshold for the
ottava bracket to begin and the threshold below which the number of
ledger lines must drop for it to end.</dd>

<dt><code>INSTR-8DNLEGLS</code></dt><dd>This is the same as <code>INSTR-8UPLEGLS</code> above, only
for ottava brackets placed below the staff</dd>

<dt><code>INSTR-PERCS</code></dt><dd><p>
This is a list of symbols, <code>PERC</code> objects, numbers or
lists indicating all of the percussion instruments that are to be
notated together as a group. <code>PERC</code> objects provide necessary extra
information for notating percussion. All of these value types function
to lookup percussion instruments in the same way as the
slot of the <code>PART</code> class. Symbols are used
as lookup values into a user-defined percussion instrument table (see
the <code>PERCUSSION</code> setting) or FOMUS's own predefined table. Lists
contain a symbol lookup value followed by keyword-argument pairs
signifying values to replace in the predefined percussion table&#x2013;it
will usually be necessary to use a list instead of a symbol since the
and slots are empty in
FOMUS's table.
</p>

<pre class="example" id="orgde17dc8">
(list '(:low-tom :note 0 :voice 1) '(:high-tom :note 4 :voice 1)
      (make-perc :anvil :note -3 :voice 2 :midinote-ex 79))
                
</pre></dd>

<dt><code>MIDIPRGCH-IM</code></dt><dd>This is a number from <code>0</code> to <code>127</code> or a list of such
numbers specifying which MIDI program change values can translate to
this instrument. This is used when specifying an instrument as a
program change number (see the slot in the
<code>PART</code> class) or calling the <code>GET-MIDI-INSTR</code> function. When given a
program change number, FOMUS finds the first instrument that matches
in its list.</dd>

<dt><code>MIDIPRGCH-EX</code></dt><dd>This is usually a number from <code>0</code> to <code>127</code>
specifying which program change value is to be used when exporting
MIDI data. It can also be set to a list, the first element of which is
the number mentioned above followed by keyword/value pairs indicating
alternate program change values for different playing modes. (For
example, the list <code>'(40 :pizz 45)</code> is a valid value for a violin
instrument.) The keywords currently allowed are <code>:PIZZ</code>, <code>:STOPPED</code>,
<code>:OPEN</code> and <code>:HARMONIC</code>. (More will be added in future releases.)</dd>
</dl>
</div>
</div>
</div><nav id="nav-right"><a href="05_09_00_structure-perc.html" class="nav-right"><i class="angle-right"></i></a></nav></div></div>
</body>
</html>
