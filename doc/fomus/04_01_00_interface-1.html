<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-08-23 Fr 08:51 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fomus</title>
<meta name="author" content="David Psenicka" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="../css/fomus.css" />
<link href="./pagefind/pagefind-ui.css" rel="stylesheet">
<script src="./pagefind/pagefind-ui.js"></script>
</head>
<body>
<div id="preamble" class="status">
<a class="top-menu" href="../overview/index.html">Overview</a>
<a class="top-menu" href="../clamps/index.html">Clamps Packages</a>
<a class="top-menu" href="../cm-dict/index.html">CM Dictionary</a>
<a class="top-menu" href="../clamps-dict/index.html">Clamps Dictionary</a>
<a class="top-menu top-menu-active" href="../fomus/index.html">Fomus</a>
</div>
<div id="org-div-nav-menu">Next: <a accesskey="n" href="04_02_00_interface-2.html"> Interface 2 </a>,&nbsp;Previous: <a accesskey="p" href="04_00_00_usage.html"> Usage </a>,&nbsp;Up: <a accesskey="u" href="04_00_00_usage.html"> Usage </a>,&nbsp;Home: <a accesskey="h" href="01_00_00_disclaimer.html"> Disclaimer </a></div><div id="content" class="content">
<nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul class="ul-toc-level-1">
<li class="toc-level-1"><a href="01_00_00_disclaimer.html"class="toc-entry">Disclaimer</a></li>
<li class="toc-level-1"><a href="02_00_00_introduction.html"class="toc-entry">Introduction</a></li>
<li class="toc-level-1"><a href="03_00_00_installation.html"class="toc-entry">Installation</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="03_00_00_installation.html"class="toc-entry">Downloading</a></li>
<li class="toc-hidden toc-level-2"><a href="03_02_00_compiling-loading.html"class="toc-entry">Compiling/Loading</a></li>
<li class="toc-hidden toc-level-2"><a href="03_03_00_installing-as-an-executable.html"class="toc-entry">Installing as an Executable</a></li>
<li class="toc-hidden toc-level-2"><a href="03_04_00_customizing-the-installation.html"class="toc-entry">Customizing the Installation</a></li>
<li class="toc-hidden toc-level-2"><a href="03_05_00_simple-emacs-interface.html"class="toc-entry">Simple Emacs Interface</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="04_00_00_usage.html"class="toc-entry">Usage</a>
<ul class="ul-toc-level-2">
<li class="toc-level-2"><a href="04_01_00_interface-1.html"class="toc-entry toc-active">Interface 1</a></li>
<li class="toc-level-2"><a href="04_02_00_interface-2.html"class="toc-entry">Interface 2</a></li>
<li class="toc-level-2"><a href="04_03_00_text-file-interface.html"class="toc-entry">Text File Interface</a></li>
<li class="toc-level-2"><a href="04_04_00_common-music-interface.html"class="toc-entry">Common Music Interface</a></li>
<li class="toc-level-2"><a href="04_05_00_command-line-interface.html"class="toc-entry">Command Line Interface</a></li>
<li class="toc-level-2"><a href="04_06_00_chunks.html"class="toc-entry">Chunks</a></li>
<li class="toc-level-2"><a href="04_07_00_other-interface-functions.html"class="toc-entry">Other Interface Functions</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="04_07_00_other-interface-functions.html"class="toc-entry">list-fomus-settings</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_02_list-fomus-modules.html"class="toc-entry">list-fomus-modules</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_03_list-fomus-instruments.html"class="toc-entry">list-fomus-instruments</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_04_get-instr-syms.html"class="toc-entry">get-instr-syms</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_05_list-fomus-percussion.html"class="toc-entry">list-fomus-percussion</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_06_get-perc-syms.html"class="toc-entry">get-perc-syms</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_07_list-fomus-instrgroups.html"class="toc-entry">list-fomus-instrgroups</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_08_list-fomus-clefs.html"class="toc-entry">list-fomus-clefs</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_09_list-fomus-meas-divs.html"class="toc-entry">list-fomus-meas-divs</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_10_list-fomus-tuplet-divs.html"class="toc-entry">list-fomus-tuplet-divs</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_11_load-init-file.html"class="toc-entry">load-init-file</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_12_get-midi-instr.html"class="toc-entry">get-midi-instr</a></li>
<li class="toc-hidden toc-level-3"><a href="04_07_13_marks.html"class="toc-entry">marks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-level-1"><a href="05_00_00_objects.html"class="toc-entry">Objects</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="05_01_00_class-part.html"class="toc-entry">Class PART</a></li>
<li class="toc-hidden toc-level-2"><a href="05_02_00_class-timesig.html"class="toc-entry">Class TIMESIG</a></li>
<li class="toc-hidden toc-level-2"><a href="05_03_00_class-timesig-repl.html"class="toc-entry">Class TIMESIG-REPL</a></li>
<li class="toc-hidden toc-level-2"><a href="05_04_00_class-keysig.html"class="toc-entry">Class KEYSIG</a></li>
<li class="toc-hidden toc-level-2"><a href="05_05_00_class-note.html"class="toc-entry">Class NOTE</a></li>
<li class="toc-hidden toc-level-2"><a href="05_06_00_class-rest.html"class="toc-entry">Class REST</a></li>
<li class="toc-hidden toc-level-2"><a href="05_07_00_class-mark.html"class="toc-entry">Class MARK</a></li>
<li class="toc-hidden toc-level-2"><a href="05_08_00_structure-instr.html"class="toc-entry">Structure INSTR</a></li>
<li class="toc-hidden toc-level-2"><a href="05_09_00_structure-perc.html"class="toc-entry">Structure PERC</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="06_00_00_settings.html"class="toc-entry">Settings</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="06_01_00_most-useful-fomus-settings.html"class="toc-entry">Most Useful FOMUS Settings</a></li>
<li class="toc-hidden toc-level-2"><a href="06_02_00_complete-fomus-settings.html"class="toc-entry">Complete FOMUS Settings</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="06_02_00_complete-fomus-settings.html"class="toc-entry">Program Settings</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_02_backend-options.html"class="toc-entry">Backend Options</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_03_global.html"class="toc-entry">Global</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_04_objects.html"class="toc-entry">Objects</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_05_parts.html"class="toc-entry">Parts</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_06_time-signatures.html"class="toc-entry">Time Signatures</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_07_plugins.html"class="toc-entry">Plugins</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_08_plugins-on-off.html"class="toc-entry">Plugins On/Off</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_09_quantizing.html"class="toc-entry">Quantizing</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_10_staves.html"class="toc-entry">Staves</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_11_ottavas.html"class="toc-entry">Ottavas</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_12_accidentals.html"class="toc-entry">Accidentals</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_13_cautionary-accidentals.html"class="toc-entry">Cautionary Accidentals</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_14_grace-notes.html"class="toc-entry">Grace Notes</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_15_measure-tuplet-divisions.html"class="toc-entry">Measure/Tuplet Divisions</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_16_note-splitting-tying.html"class="toc-entry">Note Splitting/Tying</a></li>
<li class="toc-hidden toc-level-3"><a href="06_02_17_beams.html"class="toc-entry">Beams</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="06_03_00_alphabetical-listing-of-settings.html"class="toc-entry">Alphabetical Listing of Settings</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="07_00_00_marks.html"class="toc-entry">Marks</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="07_01_00_fomus-marks.html"class="toc-entry">FOMUS Marks</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="07_01_01_articulations.html"class="toc-entry">Articulations</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_02_dynamics.html"class="toc-entry">Dynamics</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_03_tempo-duration.html"class="toc-entry">Tempo/Duration</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_04_ornamentations.html"class="toc-entry">Ornamentations</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_05_effects.html"class="toc-entry">Effects</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_06_text.html"class="toc-entry">Text</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_07_notation.html"class="toc-entry">Notation</a></li>
<li class="toc-hidden toc-level-3"><a href="07_01_08_other.html"class="toc-entry">Other</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="07_02_00_timesig-properties.html"class="toc-entry">TIMESIG Properties</a></li>
<li class="toc-hidden toc-level-2"><a href="07_03_00_part-properties.html"class="toc-entry">PART Properties</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="08_00_00_outputs.html"class="toc-entry">Outputs</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="08_01_00_data.html"class="toc-entry">Data</a></li>
<li class="toc-hidden toc-level-2"><a href="08_02_00_lilypond.html"class="toc-entry">LilyPond</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_02_01_lilypond-options.html"class="toc-entry">LilyPond Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_02_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_03_00_musicxml.html"class="toc-entry">MusicXML</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_03_01_musicxml-options.html"class="toc-entry">MusicXML Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_03_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_04_00_musicxml-for-sibelius.html"class="toc-entry">MusicXML for Sibelius</a></li>
<li class="toc-hidden toc-level-2"><a href="08_05_00_musicxml-for-finale.html"class="toc-entry">MusicXML for Finale</a></li>
<li class="toc-hidden toc-level-2"><a href="08_06_00_common-music-notation.html"class="toc-entry">Common Music Notation</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_06_01_cmn-options.html"class="toc-entry">CMN Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_06_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_07_00_midi.html"class="toc-entry">MIDI</a>
<ul class="ul-toc-level-3">
<li class="toc-hidden toc-level-3"><a href="08_07_01_midi-options.html"class="toc-entry">MIDI Options</a></li>
<li class="toc-hidden toc-level-3"><a href="08_07_02_alphabetical-listing-of-options.html"class="toc-entry">Alphabetical Listing of Options</a></li>
</ul>
</li>
<li class="toc-hidden toc-level-2"><a href="08_08_00_chunk.html"class="toc-entry">CHUNK</a></li>
</ul>
</li>
<li class="toc-level-1"><a href="09_00_00_initialization-file.html"class="toc-entry">Initialization File</a></li>
<li class="toc-level-1"><a href="10_00_00_examples.html"class="toc-entry">Examples</a>
<ul class="ul-toc-level-2">
<li class="toc-hidden toc-level-2"><a href="10_01_00_lisp-examples.html"class="toc-entry">Lisp Examples</a></li>
<li class="toc-hidden toc-level-2"><a href="10_02_00_common-music-examples.html"class="toc-entry">Common Music Examples</a></li>
<li class="toc-hidden toc-level-2"><a href="10_03_00_text-input-file-examples.html"class="toc-entry">Text Input File Examples</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<header>
<h1 class="title">Fomus</h1>
</header><div id="page-main-body"><nav id="nav-left"><a href="04_00_00_usage.html" class="nav-left"><i class="angle-left"></i></a></nav>
<div id="page-text-body"><div id="outline-container-section.usage2" class="outline-3">
<h3 id="section.usage2">Interface 1</h3>
<div class="outline-text-3" id="text-section.usage2">
<p>
The first approach involves creating all the necessary objects and
assembling lists, then calling FOMUS's main function to process
everything. The main function is <code>FOMUS</code> and has the following format:
</p>

<p>
<code>(FOMUS &amp;key setting value ...)</code>
</p>

<p>
<code>setting</code> above is one of the setting keywords listed in chapter
<a href="#org9c172f8">Settings</a>, and <code>value</code> is its value. Every piece of information
FOMUS needs can be included in this function call. The most important
settings are <code>GLOBAL</code>, <code>PARTS</code> and <code>EVENTS</code>, which contain all of the
<code>PART</code>, <code>TIMESIG</code>, <code>NOTE</code>, <code>REST</code> and other objects that directly affect
what appears on the score. See the individual documentation for these
for an explanation of how to use them. A few examples are given below
(illustrations are "raw" output processed with LilyPond version 2.4.2):
</p>

<pre class="example" id="org29dea12">
(fomus
 :output '(:lilypond :view t)
 :ensemble-type :orchestra
 :parts
 (list
  (make-part
   :name "Piano"
   :instr :piano
   :events
   (loop
    for off from 0 to 10 by 1/2
    collect (make-note :off off
               :dur (if (&lt; off 10) 1/2 1)
               :note (+ 48 (random 25))
               :marks (when (&lt;= (random 3) 0)
                '(:staccato)))))))
    
</pre>


<figure id="org522455a">
<img src="./img/usage_ex1.jpg" alt="usage_ex1.jpg" width="80%" />

<figcaption><span class="figure-number">Figure 1: </span>Example</figcaption>
</figure>

<pre class="example" id="org8875962">
(fomus
 :output '(:lilypond :view t)
 :ensemble-type :orchestra
 :default-beat 1/4
 :global (list (make-timesig :off 0 :time '(3 4))
           (make-timesig :off 7 :time '(5 8)))
 :parts
 (list (make-part
    :name "Piano"
    :instr :piano
    :events
    (loop
     for basenote in '(54 42)
     nconc (loop for off = 0 then (+ off dur)
             and dur = (/ (1+ (random 4)) 2)
             while (&lt; (+ off dur) 12)
             collect (make-note :voice '(1 2)
                    :off off
                    :dur dur
                    :note (+ basenote (random 25))))))))
    
</pre>


<figure id="orgc306e93">
<img src="./img/usage_ex2.jpg" alt="usage_ex2.jpg" width="80%" />

<figcaption><span class="figure-number">Figure 2: </span>Example</figcaption>
</figure>

<pre class="example" id="org0fb5776">
(fomus
 :output '(:lilypond :view t)
 :ensemble-type :orchestra
 :beat-division 4
 :quartertones t
 :parts (list
     (make-part
      :partid 'flute
      :name "Flute"
      :instr :flute)
     (make-part
      :partid 'tuba
      :name "Tuba"
      :instr :tuba))
 :events (loop repeat 5
           for off = (random 1.0) then (+ off (1+ (random 1.0)))
           and dur = (random 1.0)
           and inst = (if (eq inst 'flute) 'tuba 'flute)
           collect (make-note :partid inst
                  :off off
                  :dur dur
                  :note (+ (case inst
                         (flute 72)
                         (tuba 36))
                       (/ (random 25) 2))
                  :marks (case (random 3)
                       (0 '(:accent))
                       (1 '(:staccato))))))
    
</pre>


<figure id="orgd0c4925">
<img src="./img/usage_ex3.jpg" alt="usage_ex3.jpg" width="80%" />

<figcaption><span class="figure-number">Figure 3: </span>Example</figcaption>
</figure>

<p>
All of these settings are also present as special variables (see chapter
<a href="#org9c172f8">Settings</a>). The following example accomplishes exactly the same
thing as example above:
</p>

<pre class="example" id="orgc4bc617">
(setf *output* '(:lilypond :view t))
(fomus
 :ensemble-type :orchestra
 :parts
 (list
  (make-part
   :name "Piano"
   :instr :piano
   :events
   (loop
    for off from 0 to 10 by 1/2
    collect (make-note :off off
               :dur (if (&lt; off 10) 1/2 1)
               :note (+ 48 (random 25))
               :marks (when (&lt;= (random 3) 0)
                '(:staccato)))))))
    
</pre>

<p>
Specifying keywords in the <code>FOMUS</code> function always overrides what is
contained in the special variables. Also, <code>FOMUS</code> accepts one additional
key, <code>:ALLOW-OTHER-KEYS</code>. Passing a value of <code>T</code> to this argument allows
other keys that FOMUS doesn't recognize to be present in the call. By
default, <code>FOMUS</code> accepts only keywords listed in <a href="#org9c172f8">Settings</a>.
</p>
</div>
</div>
</div><nav id="nav-right"><a href="04_02_00_interface-2.html" class="nav-right"><i class="angle-right"></i></a></nav></div></div>
</body>
</html>
