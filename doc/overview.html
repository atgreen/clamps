<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de">
<head>
<!-- 2023-11-06 Mo 09:34 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>overview.org</title>
<meta name="generator" content="Org Mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #000000; }
  .timestamp-kwd { color: #000000; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="/home/orm/.config/emacs/org-mode/ox-custom/css/org-manual-style.css" />

<script src="scripts/org-info-de.js">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
// @license-end
</script>

<script>
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
org_html_manager.set("TOC_DEPTH", "3");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "info");
org_html_manager.setup();  // activate after the parameters are set
// @license-end
</script>
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">overview.org</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Inhaltsverzeichnis</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org3bfdc74">1. clog-gui-widgets</a>
<ul>
<li><a href="#org6a1f4bd">1.1. Overview</a></li>
<li><a href="#org7b835ca">1.2. Usage</a></li>
<li><a href="#orge979072">1.3. Defining new gui controllers</a></li>
</ul>
</li>
</ul>
</div>
</nav>


<div id="outline-container-org3bfdc74" class="outline-2">
<h2 id="org3bfdc74"><span class="section-number-2">1.</span> clog-gui-widgets</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org6a1f4bd" class="outline-3">
<h3 id="org6a1f4bd"><span class="section-number-3">1.1.</span> Overview</h3>
<div class="outline-text-3" id="text-1-1">
<p>
The package provides the infrastructure and clog guis for Hardware
Midi Controllers. It needs <code>clog-dsp-widgets</code> and <code>cl-midictl</code>
(including their dendencies) to work and consists of two parts:
</p>

<ul class="org-ul">
<li><p>
Midi Controllers
</p>

<p>
These are defined in <code>cl-midictl</code> and establish a representation
of the hardware controllers, their connection to the midi input
output and their state as visible to the application.
</p>

<p>
A Hardware midi controller instance is initialized with
<code>cl-midictl:add-midi-controller</code>, which adds the controller
instance to the <code>cl-midictl:*midi-controllers*</code> hash-table.
</p>

<p>
Midi input is handled by <code>generic-midi-handler</code>. The routine
first stores the incoming values in <code>*midi-cc-state*</code> or
<code>*midi-note-state*</code> and then calls the <code>handle-midi-in</code> method on
all controllers registered in <code>*midi-controllers*</code>. This routine
should take care of updating the slots of the midi-controllers
according to the defined behaviour for the hardware
controller. Generally this state is equivalent to the state in
<code>*midi-cc-state*</code>, but -in the case of non-motor sliders or
buttons- it can provide mechanisms to "catch" values in case the
state of the controller instance has changed through code rather
than midi input, by comparing the <code>cc-state</code> of the controller
instance to the incoming values stored in <code>*midi-cc-state*</code> and
act accordingly, e.g. by only updating the controller state in
case the incoming value is matching it.
</p></li>

<li><p>
Controller Gui
</p>

<p>
The controller gui class is defined in <code>clog-gui-widgets</code>. It
contains slots for all the gui elements (being clog instances in
the gui) and a slot containing the controller instance defined in
cl-midictl. This seperation is necessary as there might be more
than one Gui active (in case of multiple connections to the
server), which all relate to the same controller instance. The
methods of the gui instance maintain the gui state of all
connected guis and the synchronization between the controller
instance and the guis.
</p>

<p>
The synchronization between the gui and the controller is done in
the following way:
</p>

<p>
The gui elements simply set the corresponding slots of the
controller instance in their val-change-cb function. As the slots
in the hardware controller instance are implemented as
<code>cellctl:value-slots</code>, changing their value (using the <code>val</code>
method) triggers the ref-set method of the controller slot
instance.
</p>

<p>
The <code>ref-set method</code> takes care of defining the code to
synchronize all gui elements and the visual elements of the
hardware controller (leds, etc.). It is set up for all controller
slots in the <code>initialize-instance :after</code> method of the gui
controller class.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org7b835ca" class="outline-3">
<h3 id="org7b835ca"><span class="section-number-3">1.2.</span> Usage</h3>
<div class="outline-text-3" id="text-1-2">
<p>
In order to use a gui controller in an application, its
<code>on-new-window</code> method needs to ensure, that the corresponding
midi controller exists before instantiationg the gui instance
(using <code>find-controller</code> or initializing a new hardware controller
in case it doesn't yet exist). Then it instantiates the gui
controller instance, providing it with the controller instance
using the :midi-controller keyword.
</p>
</div>
</div>

<div id="outline-container-orge979072" class="outline-3">
<h3 id="orge979072"><span class="section-number-3">1.3.</span> Defining new gui controllers</h3>
<div class="outline-text-3" id="text-1-3">
<p>
A new gui controller can be defined accordingly: In case it is just
an alternative gui to an already existing hardware controller, the
elements of the gui need to get defined in the class definition and
its appearence in the <code>initialize-instance :after</code> method. In this
method also the updating behaviour needs to be defined by setting
the ref-set-hooks of the slots used in the hardware controller
instance.
</p>

<p>
In case there is no hardware controller defined in <code>cl-midictl</code>, it
needs to get defined in the <code>:cl-midictl</code> package and referenced by
the gui definition.
</p>

<p>
If new guis and hardware controllers are defined, please issue a
pull request for <code>clog-midi-controller</code> and/or <code>cl-midictl</code>.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2023-11-06 Mo 09:34</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>